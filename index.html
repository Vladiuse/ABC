<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!--  -->
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">KMA Help</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Аватарки</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Генератор имен</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                Формы
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="#">Локализация</a></li>
                <li><a class="dropdown-item" href="#">Примеры</a></li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
            </li>
          </ul>
          <form class="d-flex">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Search</button>
          </form>
        </div>
      </div>
    </nav>
  </header>
  <style>body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  }
  
  #chartdiv {
      width: 100%;
      height: 500px;
    }
  </style>
  <style>
    .images{
      display: flex;
      flex-wrap: wrap;
      justify-content: center;

    }
      .item{
        width: 150px;
        margin: 0px;
        padding: 0px;
        display: flex;
        margin: 2px;
        transition: all 0.2s ease-out;
        align-items: center;
        justify-content: center;
        /* background-color: aquamarine; */



      -webkit-touch-callout: none; /* iOS Safari */
      -webkit-user-select: none;   /* Chrome/Safari/Opera */
      -khtml-user-select: none;    /* Konqueror */
      -moz-user-select: none;      /* Firefox */
      -ms-user-select: none;       /* Internet Explorer/Edge */
      user-select: none;    
      }
  
      .item img{
        width: 100%;
        
      }
      .item.active{
        padding: 10px;
      }
      .item.active img{
        border: 5px solid #8cbffb;
        border-radius: 10px;
        opacity: 0.8;
      }
  </style>
  <style>
    #people-info{
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    #people-info img{
      max-height: 200px;
    }
  </style>

<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/map.js"></script>
<script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
<div id="chartdiv"></div>
<ul class="nav nav-tabs justify-content-center">
  <li class="nav-item">
    <a class="nav-link active" aria-current="page" href="#" id="geo-group">Active</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#">Аватарки</a>
  </li>
  <li class="nav-item">
    <a class="nav-link disabled">Disabled</a>
  </li>
</ul>
<div id="app" class="container">
<div id="people-info">
  <img src="https://static.mk.ru/upload/entities/2015/06/17/articles/detailPicture/95/b2/5e/ba2886266_1912640.jpg">
  <img src="https://aviasovet.ru/blog/wp-content/uploads/2013/08/532-arabskie-muzhchiny.jpg">
  <img src="https://images.pexels.com/photos/8350545/pexels-photo-8350545.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1">
  <img src="https://autogear.ru/misc/i/gallery/42406/1382837.jpg">
  <img src="https://arabperevod.ru/sites/default/files/arabicvalues.jpg">
  <img src="https://www.meme-arsenal.com/memes/d863c25216d12f20ecf00a442b0bcaa7.jpg">
</div>
<div class="images" id="avatars">

  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>

  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
  <div class="item">
    <img src="https://play-lh.googleusercontent.com/fvSu5irXm8vUNPNsxKotdUxciekJObwfpmdEz2q_NKdWNJvFbzy6Ck1ylNIR4aezPQ">
  </div>
</div>
</div>




<div class="download">
  
</div>
<script>
  $('.item').click(function(){
    $(this).toggleClass('active')
  })


  $(document).keyup(function(e) {
     if (e.key === "Escape") { // escape key maps to keycode `27`
        $('.item').removeClass('active')
    }
});
</script>


<script>
  function filterImg(id){
    // $('#app').text(id)
    $('#geo-group').text(id)
  }
</script>
<script>
var root = am5.Root.new("chartdiv");
let lastId = 0;

// Set themes
root.setThemes([
  am5themes_Animated.new(root)
]);


// Create chart
var chart = root.container.children.push(am5map.MapChart.new(root, {
  homeZoomLevel: 4,
  homeGeoPoint: { longitude: 10, latitude: 50 }
}));


// Create world polygon series
var worldSeries = chart.series.push(am5map.MapPolygonSeries.new(root, {
  geoJSON: am5geodata_worldLow,
  exclude: ["AQ"]
}));

worldSeries.mapPolygons.template.setAll({
  fill: am5.color(0xaaaaaa)
});


worldSeries.events.on("datavalidated", () => {
      chart.goHome();
    });

var legend = chart.children.push(am5.Legend.new(root, {
      
      useDefaultMarker: false,
      centerX: am5.p50,
      x: am5.p50,
      centerY: am5.p100,
      y: am5.p100,
      dy: -20,
      fill: am5.color(0x000000),
      layout: am5.GridLayout.new(root, {
          maxColumns: 5,
          fixedWidthGrid: true
        }),
      background: am5.RoundedRectangle.new(root, {
        fill: am5.color(0xffffff),
        fillOpacity: 1
      })
    }));

    
    // legend.valueLabels.template.set("forceH1idden", true)

    // При клике на фильтр
    legend.itemContainers.template.events.on("click", function(ev) {
      let poligon = ev.target.dataItem.dataContext._settings
      console.log(poligon.id, 'label ID')
      console.log(poligon.coors, 'coors')
      console.log(poligon.zoom, 'zoom')
      filterImg(poligon.id + ' ' + poligon.name)
      zoomTo(poligon)
      hideLast()
      lastId = poligon.id
    });


    // стили фильтров
    legend.labels.template.setAll({
    fontSize: 16,
    fontWeight: "800",
    disabled: true,
    fill: am5.color(0x000000),
    // fill: 'red',
  });
  
    // Create series for each group
    var colors = am5.ColorSet.new(root, {
      step: 2
    });
    colors.next();

countrysData = [
  {"name": "Европейцы",
  "data": ['AT', 'BY', 'BE', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'HU', 'IE', 'LV', 'LT', 'LU', 'MD', 'NL', 'NO', 'PL', 'RU', 'RS', 'SK', 'SI', 'SE', 'CH', 'UA', 'GB', "US", "CA", "AU"], 
  "coors":{ longitude: 10, latitude: 50 }, 
  "zoom": 5 },

  {"name": "Южная европа",
  "data": ['BA', 'HR', 'CY', 'GR', 'IT', 'ME', 'MK', 'PT', 'ES'], 
  "coors":{ longitude: 10, latitude: 40 }, 
  "zoom": 5 },

  {"name": "Арабы",
  "data": ['DZ', 'EG', 'LY', 'MA', 'TN', 'IQ', 'JO', 'KW', 'LB', 'OM', 'QA', 'SA', 'SY', 'AE', 'YE'], 
  "coors":{ longitude: 12, latitude: 30 }, 
  "zoom": 5 } ,

  {"name": "Индейцы",
  "data": ['BZ', 'CR', 'CU', 'DO', 'SV', 'GT', 'HT', 'HN', 'JM', 'MX', 'NI', 'PA', 'PR', 'AR', 'BO', 'BR', 'CL', 'CO', 'EC', 'GF', 'GY', 'PY', 'PE', 'SR', 'UY', 'VE'], 
  "coors":{ longitude: -65, latitude: -15 }, 
  "zoom": 2.4 },

  {"name": "Турки и албанцы",
  "data": ['AL', 'XK', 'TR'], 
  "coors":{ longitude: 25, latitude: 40 }, 
  "zoom": 10 },

  {"name": "Индийцы",
  "data": ['BD', 'BT', 'IN', 'NP', 'PK', "LK"], 
  "coors":{ longitude: 78, latitude: 19 }, 
  "zoom": 5 },

  {"name": "Африка",
  "data": ['AO', 'BJ', 'BW', 'BF', 'BI', 'CM', 'CF', 'TD', 'CI', 'CD', 'DJ', 'GQ', 'ER', 'SZ', 'ET', 'GA', 'GH', 'GN', 'GW', 'KE', 'LS', 'LR', 'MG', 'MW', 'ML', 'MR', 'MZ', 'NA', 'NE', 'NG', 'CG', 'RW', 'SN', 'SL', 'SO', 'ZA', 'SS', 'SD', 'TZ', 'TG', 'UG', 'EH', 'ZM', 'ZW'], 
  "coors":{ longitude: 24, latitude: -5 }, 
  "zoom": 3 },

  {"name": "Азиаты",
  "data": ['KH', 'CN', 'JP', 'LA', 'MM', 'KP', 'KR', 'TH', 'VN'], 
  "coors":{ longitude: 110, latitude: 30 }, 
  "zoom": 3 },

  {"name": "Папуасы",
  "data": ['ID', 'PH', 'TL', 'PG', 'MY'], 
  "coors":{ longitude: 124, latitude: 0 }, 
  "zoom": 5 },
  {"name": "Центральная азия и кавказ",
  "data": ['AM', 'AZ', 'GE', 'KZ', 'KG', 'TJ', 'TM', 'UZ'], 
  "coors":{ longitude: 45, latitude: 40 }, 
  "zoom": 4 },
  ]
  
poligons = []
function addpoligons(){
  for (i in countrysData){
        let color = colors.next()

        group = countrysData[i]
        let polygonSeries = chart.series.push(
        am5map.MapPolygonSeries.new(root, {
        geoJSON: am5geodata_worldLow,
        include: group.data,
        fill: color,
        name: group.name,
        id: i,    
        coors: group.coors,
        zoom: group.zoom,
      }));
  if (i != 0){polygonSeries.hide(0)}
  


  polygonSeries.mapPolygons.template.setAll({
        tooltipText: "[bold]{name}[/] [bold]({id})[/]",
        interactive: false,
        fill: color,
        strokeWidth: 2,

      });


  polygonSeries.mapPolygons.template.states.create("hover", {
        fill: am5.Color.brighten(color, -0.25)
      });
    
      polygonSeries.mapPolygons.template.events.on("pointerover", function(ev) {
        ev.target.series.mapPolygons.each(function(polygon) {
          polygon.states.applyAnimate("hover");
        });
      });
    
      polygonSeries.mapPolygons.template.events.on("pointerout", function(ev) {
        ev.target.series.mapPolygons.each(function(polygon) {
          polygon.states.applyAnimate("default");
        });
      });
      
  legend.data.push(polygonSeries);

  poligons.push(polygonSeries)
  }
  
}


addpoligons()

function hideLast(){
  for (i in poligons){
  let poligon = poligons[i]
  if (poligon.get('id') == lastId){
    poligon.hide(0)
  }
}}

function zoomTo(poligon){
  chart.zoomToGeoPoint(poligon.coors,poligon.zoom,true);
}




</script>
</body>

</html>