{%extends 'image_store/base.html'%}
{%block content%}

<style>
  :root{
      --color-one: rgb(29, 29, 29); 
      --color-two: rgb(65, 65, 65);
      color: #051d27;
      color:  #00435e;
  }
  header{
    margin-bottom: 55px;
  }
  .flag-img {
    display: inline-block;
    width: 35px;
    height: 100%;
    border: 1px solid #e9ecef;
    border-radius: 2px;
    margin-left: 5px;
}
  
  
  .container {
      margin-top: 20px;
      margin-bottom: 40px;
  
      /* margin: 2em auto; */
      /* max-width: 40em; */
    }
    .device-wrapper{
      display: flex;
      justify-content: center;
      align-items: flex-end;
    }
    .device-desc{
      margin: 0 10%;
      margin-top: 20px;
      text-align: left;
    }
    .device-desc .title{
      align-items: center;
    }
    .device-desc .text{
      align-items: center;
    }
    .device-desc i{
      margin-right: 8px;
    }
    .device-desc a.btn-dark{
      transition: 0.3s;
      color: #fff;
    }
    .device-desc a.btn-dark:hover{
      color:#212529;
      background-color: #fff;
    }
    
    /* Tablet device */
    .phone {
        /* background: radial-gradient(100% 100% at 50% 50%, rgba(0, 0, 0, 0.4) 49%, transparent 50%) -26px 50%/20px 20px, linear-gradient(0deg, rgba(0, 0, 0, 0.4) 100%, transparent 0) calc(100% + 15px) 50%/6px 80px; */
        background-repeat: no-repeat;
        border: 24px solid rgba(0, 0, 0, 0.5);
        border-left-width: 32px;
        border-radius: 15px;
        box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.5);
        transition: background .5s ease-in-out;
        background: radial-gradient(100% 100% at 50% 50%, rgba(0, 0, 0, 0.4) 49%, transparent 50%) 50% calc(100% + 36px)/30px 30px, linear-gradient(90deg, rgba(0, 0, 0, 0.4) 100%, transparent 0) 50% -20px/80px 6px;
          background-repeat: no-repeat;
          border-width: 45px 10px;
          min-height: 480px;
          max-height: 90vh;
          object-fit: cover;
          object-position: top left;
    }
  
    .desctop {
        background: radial-gradient(100% 100% at 50% 50%, rgba(0, 0, 0, 0.4) 49%, transparent 50%) -26px 50%/20px 20px, linear-gradient(0deg, rgba(0, 0, 0, 0.4) 100%, transparent 0) calc(100% + 15px) 50%/6px 80px;
        background-repeat: no-repeat;
        border: 24px solid rgba(0, 0, 0, 0.5);
        border-left-width: 32px;
        border-radius: 15px;
        box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.5);
        transition: background .5s ease-in-out;
        background: radial-gradient(100% 100% at 50% 50%, rgba(0, 0, 0, 0.4) 49%, transparent 50%) 50% -14px/10px 10px;
          background-repeat: no-repeat;
          border-width: 15px 10px 30px;
    }
    
      .desctop-base {
        background-color: var(--color-one);
        border-radius: 0 0 15px 15px;
        display: block;
        height: 24px;
        margin-left: -5%;
        margin-top: -20px;
        position: relative;
        width: 110%;
      }
      .desctop-base:after {
          content: "";
          background-color: var(--color-two);
          border-radius: 0 0 5px 5px;
          display: block;
          height: 5px;
          margin: 0 auto;
          width: 85px;
      }
    
    
    
    picture{
      margin: 0 40px;
      background-color: var(--color-two);
      border-radius: 15px;
      cursor: pointer;
    }
    * { box-sizing: border-box; }
    body {
      /* background-color: #00435e; */
      /* color: white; */
      font-family: 'Lato', 'Lucida Grande', 'Lucida Sans Unicode', Tahoma, Sans-Serif;
      margin:0;
      text-align:center;
    }
    img { height: 600px; }
    @media screen and (max-width: 1300px) {
      img { height: 550px; }
    }
    @media screen and (max-width: 1200px) {
      img { height: 500px; }
    }
    @media screen and (max-width: 1100px) {
      img { height: 450px; }
    }
    @media screen and (max-width: 1000px) {
      img { height: 400px; }
    }
    @media screen and (max-width: 900px) {
      img { height: 350px; }
    }

    #country-filter{
      display: flex;
      justify-content: center;
    }
    #country-filter div{
      max-width: 800px;
    }
    #country-filter .btn{
      margin-bottom: 3px;
    }
  </style>
  <h1>Шаблоны новостных сайтов</h1>
  <div class="" id="country-filter">
    <div>
      {%for country in countrys%}
    <button class="btn {%if country.iso == 'ru'%}btn-dark{%else%}btn-outline-dark{%endif%}" data-country="{{country.iso}}">
      <img class="flag-img " src="/static/flags/4x3/{{country.iso}}.svg">
      {{country.name}}
    </button>
    {%endfor%}
    </div>
  </div>
  {%for site in sites%}
    
      <div class="container country" data-country="{{site.country}}" style="display: {%if site.country != 'ru'%}none{%endif%};"> 
          <div class="device-wrapper" >
              <picture>
                  <img class="desctop" src="{{site.desktop_screenshot.url}}" />
                  <i class="desctop-base"></i>
                </picture>
              <picture>
                <img class="phone" src="{{site.phone_screenshot.url}}" />
                <i class="phone-base"></i>
              </picture>
          </div>
          <div class="device-desc">
              <h3 class="title">{{site.name}}</h3>
              {%if site.description%}
              <p class="text">{{site.description}}</p>
              {%else%}
              <p class="text">Lorem ipsum dolor sit amet consectetur adipisicing elit. Id molestias non veritatis odit aperiam nihil consequuntur quod. Reprehenderit consequuntur, a eaque fuga, magni fugit incidunt accusantium harum vel veniam consequatur.</p>
              {%endif%}
              <p><i>Читают в странах:</i><img class="flag-img " src="/static/flags/4x3/{{site.country}}.svg"></p>
              <a class="btn btn-dark" href="{%url 'archive:show_site' site.dir_name %}" target="_blank">
                <i class="fa-solid fa-eye"></i>
                Посмотреть</a>
              {%if site.zip_archive %}
              <a class="btn btn-dark" href="{%url 'archive:site_load_zip' site.pk%}">
                <i class="fa-solid fa-download"></i>
                Скачать</a>
              {%endif%}
                {%if site.original_url%}
                <a class="btn btn-dark" href="{{site.original_url}}" target="_blank">
                  <i class="fa-solid fa-earth-americas"></i>
                  Посмотреть оригинал сайта</a>
                {%endif%}   
          </div>
      </div> 
    {%endfor%}  

<script>
  function filterSites(iso_code){
    $('.country').each(function(){
      if ($(this).attr('data-country')== iso_code || iso_code == null)
      {$(this).show()}
      else
      {$(this).hide()}
    })
  }

  $('#country-filter .btn').click(function(){
    $('#country-filter .btn').removeClass('btn-dark')
    $('#country-filter .btn').addClass('btn-outline-dark')
    $(this).addClass('btn-dark')
    $(this).removeClass('btn-outline-dark')
    filterSites($(this).attr('data-country'))
  })
</script>
{%endblock%}